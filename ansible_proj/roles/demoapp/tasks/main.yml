---
- name: install apt dependencies for demo project 
  apt: name={{ item }} state=present
  with_items:
     - [build-essential, libssl-dev, libffi-dev, python-dev, python-pip, uwsgi]

- name: install uwsgi and cryptography
  pip: name={{ item }} state=present
  with_items:
     - [cryptography, flask]

- name: make directory flaskProj in /home/mani
  file: path=/home/mani/flaskProj state=directory 

- name: copy demo app files to flakProj location
  copy: src={{ item }} dest=/home/mani/flaskProj/ mode=0666 owner=www-data group=www-data
  with_items:
     - [demo.ini, demo.py, demo.sock]

- name: restart nginx
  service: name=nginx state=restarted  
